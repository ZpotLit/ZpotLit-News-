<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>ZpotLit News | Breaking & Daily Updates</title>

<!-- ‚úÖ Google AdSense Code Snippet -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9702899463803987"
     crossorigin="anonymous"></script>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:#f4f4f4;color:#222;transition:0.3s;overflow-x:hidden;-webkit-overflow-scrolling:touch;}
#breaking-bar{background:#009933;color:#fff;overflow:hidden;position:sticky;top:0;z-index:2000;display:flex;align-items:center;}
#breaking-title{background:#007a29;padding:0.5rem 1rem;font-weight:600;flex-shrink:0;}
#ticker-wrapper{overflow:hidden;flex:1;position:relative;height:2rem;display:flex;align-items:center;}
#ticker{display:inline-block;white-space:nowrap;position:absolute;animation:scroll-left 200s linear infinite;color:#fff;}
@keyframes scroll-left{0%{transform:translateX(100%);}100%{transform:translateX(-100%);}}
header{background:#009933;color:#fff;text-align:center;padding:1rem;font-size:1.4rem;font-weight:600;position:sticky;top:30px;z-index:1000;display:flex;align-items:center;justify-content:space-between;}
#darkModeToggle,#refreshBtn{background:#fff;color:#009933;border:none;padding:0.4rem 0.7rem;border-radius:8px;font-weight:600;cursor:pointer;margin-left:0.5rem;}
#search-container{background:#fff;padding:0.6rem;display:flex;justify-content:center;align-items:center;gap:0.4rem;border-bottom:2px solid #ddd;}
#search-input{width:75%;padding:0.6rem;border:2px solid #ccc;border-radius:8px;color:#222;background:#fff;}
#search-input::placeholder{color:#888;}
#search-btn{background:#009933;color:#fff;border:none;padding:0.6rem 1rem;border-radius:8px;cursor:pointer;font-weight:600;}
nav{display:flex;justify-content:space-around;background:#fff;border-bottom:2px solid #ddd;flex-wrap:wrap;}
nav button{flex:1;padding:0.8rem 0;border:none;background:#fff;font-weight:600;color:#555;cursor:pointer;transition:0.3s;}
nav button.active{color:#009933;border-bottom:3px solid #009933;background:#e8ffe8;}
.news-section{display:none;padding:1rem;}
.news-section.active{display:block;}
.news-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1rem;}
.news-card{background:#fff;border-radius:10px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,0.1);transition:transform 0.2s, background 0.3s;}
.news-card:hover{transform:translateY(-4px);}
.news-card img{width:100%;height:180px;object-fit:cover;}
.news-card-content{padding:0.8rem;}
.news-card h3{font-size:1rem;margin-bottom:0.3rem;color:#111;transition:color 0.3s;}
.news-meta{font-size:0.8rem;color:#555;margin-bottom:0.5rem;transition:color 0.3s;}
.news-card a{display:inline-block;margin-top:0.4rem;background:#009933;color:#fff;padding:0.4rem 0.7rem;border-radius:6px;text-decoration:none;font-size:0.9rem;transition:background 0.3s,color 0.3s;}
.dark-mode{background:#111;color:#eee;}
.dark-mode header{background:#007a29;}
.dark-mode nav{background:#222;border-color:#333;}
.dark-mode nav button{background:#222;color:#ccc;}
.dark-mode nav button.active{color:#00ff99;background:#333;border-color:#00ff99;}
.dark-mode .news-card{background:#1e1e1e;box-shadow:none;}
.dark-mode .news-card h3{color:#eee;}
.dark-mode .news-meta{color:#ccc;}
.dark-mode .news-card a{background:#00b359;color:#fff;}
.dark-mode #search-container{background:#222;border-color:#333;}
.dark-mode #search-input{background:#333;color:#eee;border-color:#555;}
.dark-mode #search-input::placeholder{color:#aaa;}
.dark-mode #ticker{color:#00ff99;}
.sub-tabs{display:flex;justify-content:center;margin-bottom:1rem;flex-wrap:wrap;}
.sub-tabs button{background:#eee;border:none;padding:0.6rem 1rem;margin:0.2rem;font-weight:600;border-radius:8px;cursor:pointer;transition:0.3s;}
.sub-tabs button.active{background:#009933;color:#fff;}
.dark-mode .sub-tabs button{background:#222;color:#ccc;}
.dark-mode .sub-tabs button.active{background:#00b359;color:#fff;}
#lastUpdated{text-align:center;font-size:0.8rem;color:#666;margin:1rem 0;transition:color 0.3s;}
.dark-mode #lastUpdated{color:#ccc;}
</style>
</head>
<body>

<div id="breaking-bar">
  <span id="breaking-title">üóû BREAKING NEWS:</span>
  <div id="ticker-wrapper"><div id="ticker">Loading top headlines...</div></div>
</div>

<header>
  <h1>ZpotLit News</h1>
  <div>
    <button id="darkModeToggle">üåô</button>
    <button id="refreshBtn">‚ü≥ Refresh</button>
  </div>
</header>

<div id="search-container">
  <input type="text" id="search-input" placeholder="Search news (e.g. AI, Elections, Sports)">
  <button id="search-btn">Search</button>
</div>

<nav>
  <button class="active" data-section="global">Global</button>
  <button data-section="africa">Africa</button>
  <button data-section="nigeria">Nigeria</button>
  <button data-section="sports">Sports</button>
</nav>

<section id="global" class="news-section active"><div class="news-container" id="global-news"></div></section>
<section id="africa" class="news-section"><div class="news-container" id="africa-news"></div></section>

<section id="nigeria" class="news-section">
  <div class="sub-tabs">
    <button class="active" data-ngcat="politics">üèõ Politics</button>
    <button data-ngcat="education">üéì Education</button>
    <button data-ngcat="economy">üí∞ Economy</button>
  </div>
  <div class="news-container" id="nigeria-news"></div>
</section>

<section id="sports" class="news-section">
  <div class="sub-tabs">
    <button class="active" data-sport="football">‚öΩ Football</button>
    <button data-sport="basketball">üèÄ Basketball</button>
    <button data-sport="others">üéæ Others</button>
  </div>
  <div class="news-container" id="sports-news"></div>
</section>

<p id="lastUpdated">Last updated: just now</p>

<script>
// Dark Mode Toggle
const toggle = document.getElementById('darkModeToggle');
toggle.onclick = () => {
  document.body.classList.toggle('dark-mode');
  toggle.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
};

// Navigation
document.querySelectorAll('nav button').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    document.querySelectorAll('.news-section').forEach(s => s.classList.remove('active'));
    document.getElementById(btn.dataset.section).classList.add('active');
  });
});

// Sub-tabs
let currentSport='football', currentNG='politics';
document.querySelectorAll('[data-sport]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('[data-sport]').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    currentSport=btn.dataset.sport;
    loadSportsNews(currentSport);
  });
});
document.querySelectorAll('[data-ngcat]').forEach(btn=>{
  btn.addEventListener('click',()=>{
    document.querySelectorAll('[data-ngcat]').forEach(b=>b.classList.remove('active'));
    btn.classList.add('active');
    currentNG=btn.dataset.ngcat;
    loadNigeriaNews(currentNG);
  });
});

// RSS Feeds
const feeds = {
  global: ['https://rss.cnn.com/rss/edition.rss','http://feeds.bbci.co.uk/news/world/rss.xml'],
  africa: ['https://www.africanews.com/feed/','https://allafrica.com/tools/headlines/rdf/latest/headlines.rdf'],
  nigeria: {
    politics:['https://punchng.com/topics/politics/feed/','https://www.vanguardngr.com/category/politics/feed/'],
    education:['https://thenationonlineng.net/feed/','https://tribuneonlineng.com/feed/','https://dailypost.ng/feed/'],
    economy:['https://nairametrics.com/feed/','https://businessday.ng/feed/','https://leadership.ng/feed/']
  },
  sports:{
    football:['http://feeds.bbci.co.uk/sport/football/rss.xml'],
    basketball:['https://www.espn.com/espn/rss/nba/news'],
    others:['http://feeds.bbci.co.uk/sport/rss.xml']
  }
};

function timeAgo(dateStr){
  if(!dateStr)return'';
  const diff=(new Date()-new Date(dateStr))/1000;
  const h=Math.floor(diff/3600);
  const d=Math.floor(diff/86400);
  return d>0?`${d}d ago`:h>0?`${h}h ago`:`${Math.floor(diff/60)}m ago`;
}

function renderNews(container, articles){
  if(!articles.length){ container.innerHTML=""; return; }
  const cards = [];
  articles.slice(0,20).forEach(a=>{
    const imgTag = a.enclosure?.link || a.thumbnail || a.urlToImage
                   ? `<img src="${a.enclosure?.link || a.thumbnail || a.urlToImage}" alt="News Image">`
                   : "";
    cards.push(`
      <div class="news-card">
        ${imgTag}
        <div class="news-card-content">
          <h3>${a.title}</h3>
          <p class="news-meta">${timeAgo(a.pubDate || a.isoDate || a.publishedAt)}</p>
          <a href="${a.link || a.url}" target="_blank">Read More</a>
        </div>
      </div>
    `);
  });
  container.innerHTML = cards.join('');
}

// Loaders
async function loadNigeriaNews(cat){
  const c=document.getElementById('nigeria-news');
  c.innerHTML="";
  let all=[];
  for(let f of feeds.nigeria[cat]) all=all.concat(await fetchRSS(f));
  renderNews(c,all);
}
async function loadGenericNews(section,id){
  const c=document.getElementById(id);
  c.innerHTML="";
  let all=[];
  for(let f of feeds[section]||[]) all=all.concat(await fetchRSS(f));
  renderNews(c,all);
}
async function loadSportsNews(cat){
  const c=document.getElementById('sports-news');
  c.innerHTML="";
  let all=[];
  for(let f of feeds.sports[cat]) all=all.concat(await fetchRSS(f));
  renderNews(c,all);
}

// Fetch RSS
async function fetchRSS(url){
  const api=`https://api.rss2json.com/v1/api.json?rss_url=${encodeURIComponent(url)}`;
  try{
    const r=await fetch(api);
    const d=await r.json();
    return (d.items||[]).sort((a,b)=>new Date(b.pubDate||b.isoDate||b.publishedAt)-new Date(a.pubDate||a.isoDate||a.publishedAt));
  }catch(e){return[];}
}

// Breaking
async function loadBreaking(){
  const urls=['http://feeds.bbci.co.uk/news/world/rss.xml','https://punchng.com/feed/'];
  let headlines=[];
  for(let u of urls){const items=await fetchRSS(u);headlines=headlines.concat(items.map(i=>i.title));}
  document.getElementById('ticker').innerHTML=headlines.slice(0,15).join(' ‚Ä¢ ');
}

// Search
document.getElementById('search-btn').addEventListener('click',async()=>{
  const q=document.getElementById('search-input').value.trim();
  if(!q)return alert('Enter a keyword');
  const container=document.createElement('div');
  container.classList.add('news-container');
  const sec=document.querySelector('.news-section.active');
  sec.innerHTML='';
  sec.appendChild(container);
  container.innerHTML='<p>Searching...</p>';
  const url=`https://newsapi.org/v2/everything?q=${encodeURIComponent(q)}&apiKey=33caabd445a4487c800ad4edce0ff02c&pageSize=20&sortBy=publishedAt`;
  try{
    const res=await fetch(url);
    const data=await res.json();
    if(data.articles?.length){
      renderNews(container,data.articles.map(a=>({title:a.title,link:a.url,thumbnail:a.urlToImage,publishedAt:a.publishedAt})));
    }else container.innerHTML='';
  }catch(e){container.innerHTML='';}
});

// Manual refresh
document.getElementById('refreshBtn').addEventListener('click',refreshAll);
async function refreshAll(){
  await loadBreaking();
  await loadGenericNews('global','global-news');
  await loadGenericNews('africa','africa-news');
  loadNigeriaNews(currentNG);
  loadSportsNews(currentSport);
  document.getElementById('lastUpdated').textContent="Last updated: "+new Date().toLocaleTimeString();
}

// Initial load
refreshAll();
</script>
</body>
</html>